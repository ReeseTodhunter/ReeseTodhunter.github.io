<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reese Programs A Thing</title>
    <link rel="stylesheet" href="ProjectPageStyles.css">
    <script src="https://kit.fontawesome.com/650c1785fc.js" crossorigin="anonymous"></script>
</head>
<body>
    <section id="top"></section>

    <!--Nav Bar Section-->
    <nav class="navbar">
        <div class="navbar__container">
            <a href="/index.html" id="navbar__logo">Reese Todhunter</a>
            <div class="navbar__toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="back"></span>
            </div>
            <ul class="navbar__menu">
                <li class="navbar__btn">
                    <a href="/index.html#about" class="button navblue"><i class="fa-solid fa-circle-info"></i>About</a>
                </li>
                <li class="navbar__btn">
                    <a href="/index.html#projects" class="button navgreen"><i class="fa-solid fa-laptop-code"></i>Projects</a>
                </li>
                <li class="navbar__btn">
                    <a href="/index.html#gamejams" class="button navred"><i class="fa-solid fa-laptop-code"></i>Experimental</a>
                </li>
                <li class="navbar__btn">
                    <a href="/pdf/Reese_Todhunter-CV.pdf" target="_blank" class="button navorange"><i class="fa-solid fa-file-lines"></i>CV</a>
                </li>
                <li class="navbar__btn">
                    <a href="/index.html#contact" class="button navyellow"><i class="fa-solid fa-message"></i>Contact</a>
                </li>
            </ul>
        </div>
    </nav>

    <section class="project">
        <div class="project">
            <div class="project__title">
                <h1>Procedural Maze Generator</h1>
                <h2>(Recursive Backtracker and Perlin Noise)</h2>
            </div> 

            <div class="project__background" style = "background-color: #034c52
            ;">

                <div class="video__wrapper">
                    <video src="videos/Procedural Maze Generator Video.mp4" alt="video" id="main__video"
                     style = "width: 100%; height: 100%;" controls poster = "images/Procedural Maze.png"></video>
                </div>

                    <p><br/>
                        This Procedural Maze Generator is a Unity based tool that generates mazes using the Recursive Backtracking Algorithm, using Perlin Noise it also generates intertesting and organic-looking terrain for mazes to be generated within.
                        
                        <h2 style="margin-top: 2%;">How it works</h2>

                        <h2 style="margin-top: 25px; margin-bottom: -5px;">Cells</h2>

                        <div class = "image-text-container">
                            <div class = "text-content">
                                <p>
                                    A custom class called "Cell" is used throughout the maze generation process to store key information for each grid position of the maze. This includes:</br><br/>
                                    The cell's ID value,<br/>
                                    The X and Z position of the cell,<br/>
                                    The number of active walls the cell should have,<br/>
                                    A list of the cell's wall gameobjects,<br/>
                                    A flag for if the cell has been visited or not,<br/>
                                    A NullCell flag.<br/><br/>
                                </p>
                            </div>
                            <div class = "image_container">
                                <img src = "images/Cells.png" alt = "Grid">
                            </div>
                        </div>
                        <p>
                            
                        </p>

                        <h2 style="margin-top: 30px; margin-bottom: -5px;">Generation</h2>

                        <div class = "image-text-container">
                            <div class = "image_container">
                                <img src = "images/Grid.png" alt = "Grid">
                            </div>
                            <div class = "text-content">
                                <p>
                                    To begin, the maze generator script generates a 2D array of "Cells" and assigns each a unique ID and it's position.</br>
                                    This "maze" array is then passed into the "GenerateMaze" function, here a new random is seeded unless there is already an assigned seed.</br>
                                    If Perlin noise is enabled, a 2D array of float values is created to store the generated noise. The noise is then offset by either a randomized or predefined value.</br>
                                    Once generated, each value in the perlin noise array is compared to a tolerance threshold, any cells above this threshold are flagged as null cells and are set to visted, preventing the backtracker from pathfinding through them.</br></br>
                                </p>
                            </div>
                        </div>

                        <div class = "image-text-container">
                            <div class = "image_container">
                                <img src = "images/PerlinNoise.png" alt = "Perlin Noise">
                            </div>
                            <div class = "text-content">
                                <p>
                                    From here, the "maze" array is passed into the "Backtracker" function to begin the actual maze generation.</br>
                                    If there is no assigned starting cell, a random starting point is chosen from available non-null cells.</br>
                                    The selected starting cell is then set to visited and is pushed to a stack of positions.</br>
                                    While this stack isn't empty, the current position is set to the next position in the stack and all neighbouring cells are checked for unvisited cells.</br>
                                    If there are any visitable neighbours, a random cell from the visitable cells is selected as the next cell. Both the current cell and next cell are then pushed onto the stack and the loop continues.</br>
                                    If there are no visitable neighbouring cells, the loop still repeats as long as the stack of positions is not empty. In this case, the next position in the stack is popped from the stack to replace the previous one.</br></br>
                                </p>
                            </div>
                        </div>

                        <div class = "image-text-container">
                            <div class = "image_container">
                                <img src = "images/NoMissedCellCheck.gif" alt = "No Missed Cells Check">
                            </div>
                            <div class = "text-content">
                                <p>
                                    Once the stack is empty a check is run to ensure there are no cells remaining that are "unvisited".</br>
                                    If there are any missed cells, the "ConnectUnvisitedCells" function is called.</br>
                                    This gets a random unvisited cell and then searchs in all directions for the nearest visited cell.</br>
                                    After finding a visted cell, all cells between the unvisited cell and the visited cell are marked as unvisted and the "Backtracker" method is recalled from the newly connected cell.</br>
                                    Finally the maze array is returned to the UpdateMaze function where it is ready to be visualised.</br></br>
                                </p>
                            </div>
                        </div>

                        <h2 style="margin-top: 20px; margin-bottom: -5px;">Visualisation</h2>

                        <div class = "image-text-container">
                            <div class = "text-content">
                                <p>
                                    To visualise the maze step by step, a queue of Vector2 positions is created to store the order of visited cells.</br>
                                    During the "Backtracker" function, whenever a new position to visit is found and pushed to the backtracking stack, it is also added to the visualisation queue.</br>
                                    This is also done on dead-ends to ensure the full maze gets visualised.</br></br>
                                </p>
                            </div>
                            <div class = "image_container">
                                <img src = "images/BasicBacktracker.gif" alt = "Walker Movement">
                            </div>
                        </div>

                        <div class = "image-text-container">
                            <div class = "text-content">
                                <p>
                                    The maze grid is now passed into the "VisualiseMaze" function and every space in the grid is initally filled with obstacle blocks to serve as a base visual.</br>
                                    Each position in the visualisation queue is then checked for non "nullcells". For all cells not marked as null, the obstacle block is destroyed in to clear space for the backtracker.</br>
                                    Next, the cell's walls value is read to determine what walls to instatiate.</br>
                                    The wall placement action for each cell is then stored in another queue of actions, to create the step by step visualisation effect.</br>
                                    Lastly, in update if there are actions in the action queue and the time between steps is over a set threshold, the next queued action is unqueued and exectuted.</br>
                                    This creates the step by step generation effect and allows the user to watch the maze being built in real time.</br></br>
                                </p>
                            </div>
                            <div class = "image_container">
                                <img src = "images/FullMazeGenerator.gif" alt = "Walker Movement">
                            </div>
                        </div>

                        <div class = "dropdown">
                            <a href = "https://github.com/ReeseTodhunter/Procedurally_Generated_Maze" target="_blank">
                                <button class="dropdown__button lightblue">
                                    Github Repo Link
                                </button>
                            </a>
                        </div>
                    </p>
            </div>
        </div>
    </section>
    <script src="app.js"></script> 
</body>
</html>